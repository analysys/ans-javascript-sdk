var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(){}t.prototype.paramType=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},t.prototype.objHasKay=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.prototype.ArrayToObj=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t},t.prototype.keyValueToObje=function(e,t){var r={};return r[e]=t,r},t.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if("Object"===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},t.prototype.toDeepObj=function(e,t){var r={};if("String"===this.paramType(e))return r=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return r=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var n in e)r[n]=this.toDeepObj(e[n]);return r},t.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if("Object"===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},t.prototype.toObj=function(e,t){var r={};return"String"===this.paramType(e)?r=this.keyValueToObje(e,t):"Array"===this.paramType(e)?r=this.ArrayToObj(e):"Object"===this.paramType(e)?e:r},t.prototype.objMerge=function(e,t,r){if(void 0===r&&(r={arrMerge:!0}),"Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var n={};for(var o in e)n[o]=e[o];for(var a in t){var i=t[a],p=n[a],c=this.paramType(i),l=this.paramType(p);p&&"Object"===l&&"Object"===c?n[a]=this.objMerge(p,i,r):"Array"===l&&"Array"===c&&r.arrMerge?n[a]=this.arrayMergeUnique(p,i):n[a]="Function"===c&&"Function"===l?this.compose(p,i):i}return n},t.prototype.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},t.prototype.fnMerge=function(e,t){return this.objMerge(e,t)},t.prototype.arrayUnique=function(e){for(var t=[],r={},n=0;n<e.length;n++)r[e[n]]||(r[e[n]]=!0,t.push(e[n]));return t},t.prototype.arrayMerge=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];"Object"===this.paramType(e[n])&&(o=this.toDeep(e[n])),r.push(o)}for(var a=0;a<t.length;a++){var i=t[a];"Object"===this.paramType(t[a])&&(i=this.toDeep(t[a])),r.push(i)}return r},t.prototype.arrayMergeUnique=function(e,t){return e.push.apply(e,t),this.arrayUnique(e)},t.prototype.encode=function(t){var r,n,o,a,i,p,c,l="",s=0;for(t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(t);s<t.length;)a=(r=t.charCodeAt(s++))>>2,i=(3&r)<<4|(n=t.charCodeAt(s++))>>4,p=(15&n)<<2|(o=t.charCodeAt(s++))>>6,c=63&o,isNaN(n)?p=c=64:isNaN(o)&&(c=64),l=l+e.charAt(a)+e.charAt(i)+e.charAt(p)+e.charAt(c);return l},t.prototype.decode=function(t){var r,n,o,a,i,p,c="",l=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");l<t.length;)r=e.indexOf(t.charAt(l++))<<2|(a=e.indexOf(t.charAt(l++)))>>4,n=(15&a)<<4|(i=e.indexOf(t.charAt(l++)))>>2,o=(3&i)<<6|(p=e.indexOf(t.charAt(l++))),c+=String.fromCharCode(r),64!==i&&(c+=String.fromCharCode(n)),64!==p&&(c+=String.fromCharCode(o));return c=function(e){for(var t="",r=0,n=0,o=0,a=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),a=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),r+=3);return t}(c)},t.prototype.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.prototype.format=function(e,t){var r=e.getTimezoneOffset(),n={"M+":(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,3===RegExp.$1.length?(""+n[o]).length<3?("00"+n[o]).substr(("00"+n[o]).length-3,("00"+n[o]).length):n[o]:("00"+n[o]).substr((""+n[o]).length)));return t.toString()},t.prototype.MD5=function(e,t){function r(e,t){return e<<t|e>>>32-t}function n(e,t){var r,n,o,a,i;return o=2147483648&e,a=2147483648&t,i=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^i^o^a:r|n?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a}function o(e,t,o,a,i,p,c){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,o,a),i),c)),n(r(e,p),t)}function a(e,t,o,a,i,p,c){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,o,a),i),c)),n(r(e,p),t)}function i(e,t,o,a,i,p,c){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,o,a),i),c)),n(r(e,p),t)}function p(e,t,o,a,i,p,c){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,o,a),i),c)),n(r(e,p),t)}function c(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var l,s,u,h,d,f,y,g,m,v;for(l=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),a=Array(o-1),i=0,p=0;p<r;)i=p%4*8,a[t=(p-p%4)/4]=a[t]|e.charCodeAt(p)<<i,p++;return i=p%4*8,a[t=(p-p%4)/4]=a[t]|128<<i,a[o-2]=r<<3,a[o-1]=r>>>29,a}(e),y=1732584193,g=4023233417,m=2562383102,v=271733878,s=0;s<l.length;s+=16)u=y,h=g,d=m,f=v,y=o(y,g,m,v,l[s+0],7,3614090360),v=o(v,y,g,m,l[s+1],12,3905402710),m=o(m,v,y,g,l[s+2],17,606105819),g=o(g,m,v,y,l[s+3],22,3250441966),y=o(y,g,m,v,l[s+4],7,4118548399),v=o(v,y,g,m,l[s+5],12,1200080426),m=o(m,v,y,g,l[s+6],17,2821735955),g=o(g,m,v,y,l[s+7],22,4249261313),y=o(y,g,m,v,l[s+8],7,1770035416),v=o(v,y,g,m,l[s+9],12,2336552879),m=o(m,v,y,g,l[s+10],17,4294925233),g=o(g,m,v,y,l[s+11],22,2304563134),y=o(y,g,m,v,l[s+12],7,1804603682),v=o(v,y,g,m,l[s+13],12,4254626195),m=o(m,v,y,g,l[s+14],17,2792965006),y=a(y,g=o(g,m,v,y,l[s+15],22,1236535329),m,v,l[s+1],5,4129170786),v=a(v,y,g,m,l[s+6],9,3225465664),m=a(m,v,y,g,l[s+11],14,643717713),g=a(g,m,v,y,l[s+0],20,3921069994),y=a(y,g,m,v,l[s+5],5,3593408605),v=a(v,y,g,m,l[s+10],9,38016083),m=a(m,v,y,g,l[s+15],14,3634488961),g=a(g,m,v,y,l[s+4],20,3889429448),y=a(y,g,m,v,l[s+9],5,568446438),v=a(v,y,g,m,l[s+14],9,3275163606),m=a(m,v,y,g,l[s+3],14,4107603335),g=a(g,m,v,y,l[s+8],20,1163531501),y=a(y,g,m,v,l[s+13],5,2850285829),v=a(v,y,g,m,l[s+2],9,4243563512),m=a(m,v,y,g,l[s+7],14,1735328473),y=i(y,g=a(g,m,v,y,l[s+12],20,2368359562),m,v,l[s+5],4,4294588738),v=i(v,y,g,m,l[s+8],11,2272392833),m=i(m,v,y,g,l[s+11],16,1839030562),g=i(g,m,v,y,l[s+14],23,4259657740),y=i(y,g,m,v,l[s+1],4,2763975236),v=i(v,y,g,m,l[s+4],11,1272893353),m=i(m,v,y,g,l[s+7],16,4139469664),g=i(g,m,v,y,l[s+10],23,3200236656),y=i(y,g,m,v,l[s+13],4,681279174),v=i(v,y,g,m,l[s+0],11,3936430074),m=i(m,v,y,g,l[s+3],16,3572445317),g=i(g,m,v,y,l[s+6],23,76029189),y=i(y,g,m,v,l[s+9],4,3654602809),v=i(v,y,g,m,l[s+12],11,3873151461),m=i(m,v,y,g,l[s+15],16,530742520),y=p(y,g=i(g,m,v,y,l[s+2],23,3299628645),m,v,l[s+0],6,4096336452),v=p(v,y,g,m,l[s+7],10,1126891415),m=p(m,v,y,g,l[s+14],15,2878612391),g=p(g,m,v,y,l[s+5],21,4237533241),y=p(y,g,m,v,l[s+12],6,1700485571),v=p(v,y,g,m,l[s+3],10,2399980690),m=p(m,v,y,g,l[s+10],15,4293915773),g=p(g,m,v,y,l[s+1],21,2240044497),y=p(y,g,m,v,l[s+8],6,1873313359),v=p(v,y,g,m,l[s+15],10,4264355552),m=p(m,v,y,g,l[s+6],15,2734768916),g=p(g,m,v,y,l[s+13],21,1309151649),y=p(y,g,m,v,l[s+4],6,4149444226),v=p(v,y,g,m,l[s+11],10,3174756917),m=p(m,v,y,g,l[s+2],15,718787259),g=p(g,m,v,y,l[s+9],21,3951481745),y=n(y,u),g=n(g,h),m=n(m,d),v=n(v,f);return 32===t?c(y)+c(g)+c(m)+c(v):c(g)+c(m)},t.prototype.clientTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,n="-";return(t<=0||r<0)&&(n="+",t=-t,r<0&&(r=-r)),1===(t+="").length&&(t="0"+t),1===(r+="").length&&(r="0"+r),n+t+":"+r},t.prototype.delEmpty=function(e){var t={};for(var r in e){var n=!0,o=this.paramType(e[r]);"Object"!==o?(e[r]||"Number"===o&&!isNaN(e[r])||"Boolean"===o||(n=!1),!0===n&&(t[r]=e[r])):t[r]=this.delEmpty(e[r])}for(var a in t){var i=[];for(var p in t[a])i.push(t[a][p]);0===i.length&&t[a].constructor===Object&&delete t[a]}return t},t.prototype.addEvent=function(e,t,r,n){if(document.addEventListener)if("Array"!==this.paramType(e)&&"HTMLCollection"!==this.paramType(e)||!e.length||e===window)e.addEventListener(t,r,n);else for(var o=0;o<e.length;o++)this.addEvent(e[o],t,r,n);else if(e.length&&e!==window)for(var a=0;a<e.length;a++)this.addEvent(e[a],t,r);else e.attachEvent("on"+t,(function(){return r.call(e,window.event)}))},t.prototype.removeEvent=function(e,t,r,n){if(document.removeEventListener)if(e.length)for(var o=0;o<e.length;o++)this.removeEvent(e[o],t,r,n);else e.removeEventListener(t,r,n);else if(e.length)for(var a=0;a<e.length;a++)this.removeEvent(e[a],t,r);else e.detachEvent("on"+t,(function(){return r.call(e,window.event)}))},t.prototype.addEleLable=function(e,t,r,n){var o=document,a=o.createElement(e),i=n||o.body||o.getElementsByTagName("body")[0];return r&&(a.id=r),t&&(a.className=t),i.appendChild(a),a},t.prototype.addScript=function(e,t,r){var n=document,o=n.createElement("script"),a=n.getElementsByTagName("script");o.type="text/javascript",o.async=!0,o.id=e;var i="";if(t){if("Array"===this.paramType(t))return void(0,t[0])([t[1]],r);i="/"===t.charAt(t.length-1)?t:t+"/"}else if(n.getElementById("ARK_SDK"))i=n.getElementById("ARK_SDK").src;else for(var p=0;p<a.length;p++)if(a[p].src&&a[p].src.indexOf("AnalysysAgent_JS_SDK")>-1){i=a[p].src;break}var c=i.substring(0,i.lastIndexOf("/")+1);o.src=c+e+".min.js?v="+this.format(new Date,"yyyyMMddhhmm"),o.onload=setTimeout(r,500);var l=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];l&&l.appendChild(o)},t.prototype.GetUrlParam=function(e){var t=document.location.toString(),r=window.name;"String"===this.paramType(r)&&r.indexOf(e)>-1&&(t=r);var n,o=t.split("?");if(o.length>1){for(var a,i=[],p=1;p<o.length;p++)i.push.apply(i,o[p].split("&"));for(var c=0;c<i.length;c++)if(null!=(a=i[c].split("="))&&a[0]===e){var l=a[1];if(a[1].indexOf("#")>-1&&(l=l.split("#")[0]),l.indexOf("%")>-1){try{var s=decodeURI(l);if(n=s,new RegExp("[\\u4E00-\\u9FFF]+","g").test(n))return s}catch(e){}if("Object"===this.paramType(window.AnalysysModule)&&"Function"===this.paramType(window.AnalysysModule.decodeGBK))try{return window.AnalysysModule.decodeGBK(l,"gbk")}catch(e){}}return l}return""}return""},t.prototype.stringSlice=function(e,t){return e.slice(0,t)},t.prototype.trim=function(e){return"String"===this.paramType(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},t.prototype.changeHash=function(e){var t=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(){t.apply(window.history,arguments),e.apply(e)},window.history.replaceState=function(){r.apply(window.history,arguments),e.apply(e)};var n;"on"+(n=window.ActiveXObject||"ActiveXObject"in window?"hashchange":"popstate")in window&&this.addEvent(window,n,(function(){setTimeout(e,0)}))},t.prototype.deviceType=function(){var e=navigator.userAgent;return e.indexOf("Tablet")>-1&&e.indexOf("PC")<0||e.indexOf("Pad")>-1||e.indexOf("Nexus 7")>-1?"tablet":e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1?"phone":"desktop"},t.prototype.checkTypeList=function(e,t){var r=this.paramType(e);if("String"===r){var n=window.location.href,o=window.location.protocol+"//"+window.location.host,a=o+window.location.pathname;if([n,o,a+"index.html",a,a+window.location.hash].indexOf(e)>-1)return!0}else{if("Function"===r)return e.call(e,t);if("Array"===r)for(var i=0;i<e.length;i++)if(!0===this.checkTypeList(e[i],t))return!0}return!1},t.prototype.selectorAllEleList=function(e){var t=[],r=e.split(".")[0];if("Function"===this.paramType(document.querySelectorAll)&&e.indexOf("|")<0)try{return document.querySelectorAll(e)}catch(e){}var n="";if(e.indexOf("#")>-1){n=e.split(".")[0].split("#")[1];var o=document.getElementById(n);o&&t.push(o)}else{if(e.indexOf(".")<0)return document.getElementsByTagName(r);if(e.indexOf("[")>-1&&e.indexOf("]")>-1)for(var a=document.getElementsByTagName("*"),i=e.replace("[","").replace("]",""),p=0;p<a.length;p++){var c=a[p].getAttribute(i);"String"===this.paramType(c)&&t.push(o)}else for(var l=document.getElementsByTagName(r),s=0;s<l.length;s++){var u=l[s],h="String"===this.paramType(u.className)?u.className.split(" "):[];h.length>0&&(r+"."+h.join(".")).indexOf(e)>-1&&t.push(u)}}return t},t.prototype.getDomainFromUrl=function(e,t){if(""===t)return"";var r=(t=t||window.location.hostname).split("/");r.length>2&&(t=r[2]);if(!0===/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t)||"localhost"===t)return"";var n=t.split("."),o=!0===e?2:n.length;("Number"!==this.paramType(o)||o<2)&&(o=2);var a=[];if(!(n.length>1))return"";n.length<o&&(o=n.length);for(var i=n.length-1;i>=0&&a.length!==o;i--)a.push(n[i]);return a.reverse().join(".")},t.prototype.isiOS=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.prototype.delNotHybrid=function(e){return delete e.$is_first_day,delete e.$session_id,delete e.$is_time_calibrated,delete e.$startup_time,e},t.prototype.getUrlPath=function(){var e=window.location.hash;return e.indexOf("?")>-1&&(e=e.split("?")[0]),window.location.host+window.location.pathname+e},t.prototype.detectZoom=function(){for(var e=this.selectorAllEleList("meta"),t=1,r=0;r<e.length;r++){var n=e[r].getAttribute("content");if(n&&n.indexOf("initial-scale=")>-1)for(var o=n.split(","),a=0;a<o.length;a++)o[a].indexOf("initial-scale")>-1&&(t=parseFloat(o[a].split("=")[1]))}return t};var r=new t;function n(e){var t=+new Date;!1===s&&(l=t-c+l);var n=Number(t-p-l);n<0&&(n=Number(t-p)),window.AnalysysAgent&&window.AnalysysAgent.track&&(window.AnalysysAgent.track("page_close",{pageStayTime:n,$url:u,$title:h}),"Function"===r.paramType(e)&&e.call(e,null)),a()}function o(){var e=window.location.href;try{e=decodeURIComponent(e)}catch(e){}try{!0===window.AnalysysAgent.config.isHybrid&&(e=e.replace(/"/g,'\\"'))}catch(e){}return e}function a(e,t){var r=+new Date;p=e||r,c=e||r,l=0,s=!0,u=o(),h=arguments.length>1?t:document.title}var i=+new Date,p=i,c=i,l=0,s=!0,u=o(),h=document.title,d=!0;function f(e){"Object"===r.paramType(e)&&"Boolean"===r.paramType(e.autoPageClose)&&(d=e.autoPageClose)}"onpageShow"in window?(r.addEvent(window,"pageShow",(function(){p=c=+new Date})),r.addEvent(window,"pagehide",(function(){!0===d&&n()}))):(r.addEvent(window,"load",(function(){p=c=+new Date})),r.addEvent(window,"beforeunload",(function(){!0===d&&n()}))),"onvisibilitychange"in document&&r.addEvent(document,"visibilitychange",(function(){document.hidden?(s=!1,c=+new Date):(s=!0,l=+new Date-c+l)})),window.AnalysysModule=r.objMerge(window.AnalysysModule||{},{pageClose:{Version:"4.4.1",pageEndTrack:n,init:f,createTime:a}});export{f as pageCloseInit,n as pageEndTrack};
